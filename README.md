# JPA
- 객체를 테이블에 맞추어서 모델링하면 협력관계를 만들 수 없고 다시 다 조회를 해야한다.
```java
Member m = em.find(Member.class, 1);
Team t = em.find(Team.class, m.getTeamId());
```

## 연관관계
- 다대일 관계에서 1의 pk는 다의 fk가 된다. 다가 연관관계의 주인이 된다.


## 양방향 연관관계와 연관관계의 주인
- db테이블에는 무조건 양방향임
- 객체지향에서는 단방향 , 양방향이 가능함.
- 다대일 관계에서 일의 엔티티에 @OneToMany(mappedBy = "다의 매핑된 변수명")
    - 객체와 연관관계의 차이 - 양방향으로 참조하려면 단방향을 두개 만들어야한다.
        - 객체  1. 멤버 -> 팀 2. 팀 -> 멤버 (단방향이 두개일뿐)
        - 테이블 멤버 <-> 팀
    - **둘 중 하나로 외래 키를 관리해야 한다!!!!!!!**
        - 연관 관계의 주인
        - 양방향 매핑 규칙!
        - 연관관계의 주인만이 외래키 관리
        - 주인이 아닌쪽은 `읽기만` 사용
        - 주인은 joinColumn
        - 주인이 아니면 mappedBy로 주인을 지정한다.
        - **주인은 테이블에 외래키가 있는 곳으로 정한다**
        - 그렇지 않으면 수정할 때 다른쪽 테이블에 수정 쿼리가 나간다.
- 다대일 관계에서 다의 엔티티에 @ManyToOne @JoinColumn(name = "일의pk")
